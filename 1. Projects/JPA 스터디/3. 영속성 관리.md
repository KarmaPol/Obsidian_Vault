# 엔티티 매니저
- DB 갯수만큼 엔티티 매니저 팩토리 생성
- 엔티티 매니저는 스레드 동시 접근 X
# 영속성 컨텍스트
- 엔티티 영구 저장 환경
## 영속성 생명주기
1. 비영속
2. 영속
3. 준영속
   영속 상태 -> 엔티티 매니저가 관리하지 않음
4. 삭제
# 영속성 컨텍스트 특징
1. 1차 캐시에서 조회 - 성능 이점
2. DB에서 조회
   1차 캐시에 없으면 DB 조회
3. 영속 엔티티의 동일성 보장
# 쓰기 지연
- 엔티티 매니저에 쓰기 지연 SQL을 보관
- 트랜잭션 커밋 시점에 한번에 전달
# 엔티티 수정 - 더티 체킹
- 엔티티와 스냅샷을 비교해 변경 사항을 감지
- 변경 있으면 수정 SQL을 지연 SQL 저장소에 저장
# 엔티티 삭제
- 마찬가지로 쓰기 지연
- 트랜잭션 전까지 사용하지말고 GC에 의해 제거되게 하자
## 준영속 상태
- detach(), clear()로 영속성 컨텍스트에서 제거
- 지연 로딩, 지연 SQL 동작 X
- 하지만 고유 식별자는 가짐
### 준영속을 다시 영속으로
- merge()시 다시 변경 감지 동작