- 메시지는 Partitioner를 통해 토픽 파티션 결정
- Key 값 없는 경우 라운드 로빈, 스티키 파티션x

- Key 값이 있는 경우 해싱 알고리즘에 의해 고정되게 지정
	- 특정 Key 값이 있는 경우, 특정 파티션으로 고정되어 전송

![[Pasted image 20251006224641.png]]
- 컨슈머 파티션 키에 따라 고정(일부만 캡쳐)
![[Pasted image 20251006224626.png]]

---
## Key 값을 가지지 않는 메시지 전송시 파티션 분배 전략
- 라운드로빈
	- **메시지 배치를 순차적으로 담아서** 다른 파티션으로 전송
	  147/258/369
		- batch.size 배치크기
		- linger.ms 배치대기시간
- 스티키 파티셔닝 (카프카 v2.4 이상 지원)
	- 라운드 로빈보다 성능 개선
	- **메시지 배치를 순차적으로 채움**
		123/456/789