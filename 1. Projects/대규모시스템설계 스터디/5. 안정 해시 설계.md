## 해시 키 재배치 문제
- 해시 함수
  ServerIndex = hash(key) % N
특정한 키를 서버에 균등하게 보관
서버 풀 크기가 고정되어 있을때, 데이터 분포가 균등할때는 잘 동작
-> 하지만 서버 추가, 기존 서버 삭제 시 문제 발생
-> 한 개의 서버에서 장애 발생 시, 대부분의 키가 모듈러 연산에 의해 재분배
=> 대규모 캐시 미스 발생

### 안정 해시
해시 테이블 크기가 조정될 때 평균 k/n개의 키만 재배치
- 모듈러 연산을 하지 않고, 해시 순환 링에 서버와 키값을 배치한다
- 특정 키에서 가장 가까운 서버에서 조회한다
=> 서버 추가, 제거 시에도 일부 키만 재배치
#### 안정 해시 기본 구현법의 두가지 문제
##### 기본 절차
- 서버와 키를 균등 분포 해시 함수로 해시 링에 배치
- 키의 위치에서 시계방향으로 탐색해 처음 만나는 서버가 키 저장 서버
##### 문제 1. 서버 추가, 삭제 시 서버 파티션을 균등하게 유지할 수 없다
4개의 서버가 해시 링에 있을때, 1개의 서버를 삭제하면 다음 서버의 범위가 2배로 늘어난다
##### 문제 2. 키의 균등 분포를 달성하기 어렵다
#### 해결책. 가상노드 기법
s0, s1을 가상 노드로 나눠 s0_1, s0_2, s0_3.. 각 서버가 여러 파티션 관리
해시 링 위에 가상 노드들을 균등하게 배포
가상 노드의 개수를 늘리면 키의 분포는 점점 균등해지나, 저장할 공간은 늘어난다
#### 안정해시의 이점
- 서버 추가 삭제 시 재배치 키의 최소화
- 수평적 규모 확장성
- 핫스팟 키 문제를 줄일수 있다
  (특정 유명인의 데이터가 같은 샤드에 몰리는 상황)
