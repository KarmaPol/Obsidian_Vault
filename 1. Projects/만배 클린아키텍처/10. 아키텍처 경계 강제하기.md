## 경계와 의존성
- 경계를 강제한다
- 아키텍처 내 계층간 의존 방향은 안쪽을 향해야한다
## 접근 제한자
- public, protected, private + **package-private(default)**
### 왜 default 제한자가 중요한가?
- 응집접인 모듈로 만들어준다
- 패키지 바깥에서는 접근할 수 없고, 모듈의 진입점만 public으로 만들어준다
- 예를 들어 persistence나 service내 클래스는 default로 만들고 port로 접근한다 
  -> 물론 이 방법은 스프링의 classpath (@Component)를 이용해야한다
- 하지만 규모가 커지다 보면 하위 패키지도 많아지는데, 자바는 하위 패키지는 Default로 접근할 수 없다
## 컴파일 후 체크
- CI 환경에서 자동화 테스트 과정에서 잘 동작한다
  -> ArchUnit 과 같은 도구로 의존성 방향을 체크할 수 있다
- 하지만 클래스 이름만 바꿔도 오류를 찾지 못할 수 있다 -> 항상 코드와 유지보수 해야함
## 빌드 아티팩트 (멀티 모듈 아키텍처)
- Gradle 등을 활용해 모듈을 강제로 나누어 의존성을 강제한다
- 모듈을 세분화할수록 의존성 제어가 좋아지나, 모듈 간 매핑이 더 많아진다
- 빌드 도구 자체적으로 순환 의존성을 탐지하고 방지한다 (자바 순정은 X)
- 다른 모듈을 고려하지 않고 코드를 수정할 수 있다 (SRP)
  -> 심지어 다른 계층의 코드를 수정하더라도 모듈이 다르면 테스트는 실행가능하다
- 의존성을 추가하는 작업을 의식적으로 수행해야 한다
## 유지보수에 어떻게 도움이 될까?
- 아키텍처는 결국 요소 간 의존성 관리이다
- 되도록 default를 사용해 강제로 의존성을 관리하고, 그럴 수 없다면 ArchUnit 같은 도구를 사용하자
- 아키텍처가 충분히 안정적이 된다면, 멀티 모듈로 추출해 관리하자
- 이런 접근 방식은 조합 가능하다